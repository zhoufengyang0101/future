# 一、node 及其相关

node官网下载

node 常用命令：

> node app.js   -->  执行js文件（入口文件）
>
> nodemon app.js  --> 不许要每次运行，修改自动运行

切换国内镜像：

> npm install -g cnpm --registry=https://registry.npm.taobao.org

npm 常用命令：

> npm init -y    --> npm生成配置文件`package.json`
>
> npm i -g nodemon   --> 下载nodemon
>
> npm view jquery versions  --> 查看要安装库的所有版本
>
> npm cache verify  |  npm cache clean --force  清除缓存数据（错误码是-4048需要清除）
>
> 使用npm update +包名  更新依赖
>
> npm i  安装所有依赖
>
> npm view lodash  查看库的最新版本
>
> npm view lodash versions 查看库的所有版本
>
> npm view lodash versions --json 查看依赖安装的版本

-g  全局依赖

> 常用全局安装的包
>
> nrm   管理npm的镜像地址
>
> gulp 打包工具
>
> nodemon  node服务自动重启
>
> anywhere 创建一个web服务

--save  | -S 项目依赖（项目和上线都需要用到的）

> jquery
>
> lodash

--save-dev | -D 开发依赖（只在开发时使用的）

> 打包、压缩、转码、规则等

nvm安装和使用：

> nvm node版本管理工具   可以方便切换node版本
>
> 下载地址：https://github.com/coreybutler/nvm-windows/releases
>
> - nvm-noinstall.zip：免安装版，使用时需进行配置。
> - nvm-setup.zip：安装版，推荐使用
>
> 常用命令：
>
> nvm list 显示本地安装的版本
>
> nvm install 12.19.0 安装指定版本
>
> nvm use 12.19.0 使用指定版本
>
> nvm uninstall 12.19.0 卸载指定版本
>
> nvm on / off 开启 / 关闭node版本控制



nrm：管理镜像源

> npm i -g nrm  或者  cnpm i -g nrm

安装后若不可用，C:\Users***\AppData\Roaming\npm\node_modules\nrm，找到cli.js文件的第17行，做如下修改:

> const NRMRC = path.join(process.env[(process.platform == 'win32') ? 'USERPROFILE':"HOME"], '.nrmrc ' );

nrm常用命令：

> nrm ls    --> 查看可用镜像源
>
> nrm use +名称   --> 切换镜像
>
> nrm add + 名称 + url  -->添加镜像    或使用nrm use +名称
>
> nrm del  + 名称   -->  删除镜像  



npx：不需要下载全局

例如：npx nodemon app  就可以不安装全局nodemon

# 二、 TypeScript 及其相关

npm全局安装TypeScript：

> npm i -g typescript

运行命令：

> tsc -v      -->  查看安装版本号

> tsc app.ts        -->  编译ts文件

tsc编译可以通过 `tsconfig.json` 文件来进行自定义配置：

自动生成配置文件命令：

>  tsc --init  自动生成一个tsconfig.json文件

实时编译命令：

> tsc -w   只要修改就会自动编译

```json
{
    // 用来指定哪些ts文件需要被编译
    // src目录下面的任意目录和任意文件
    "include":[
      "./src/**/*"
    ],   
    // 编译器的选项
    "compilerOptions":{
      // 用户指定ts被编译为es的版本 默认为转为es3 esnext最新版本
      "target":"es5",
      // 指定要使用的模块化规范
      "module":"es6",
      // 用户来指定编译后文件所在的目录
      "outDir":"./dist",
      // 指定ts在的目录
      "rootDir":"./src",
      // 是否对js文件进行编译，默认是false
      "allowJs": true,
      // 是否检查js代码，是否符合语法规范，默认false
      "checkJs": true,
      // 当有错误时不生成编译后的文件 true有错就不生成
      "noEmitOnError":true,
      // ------------------------------------------------
      
      // 开启严格检查
      "strict": true
    }
}

```



# 三、配置文件

#### 1. 依赖的版本控制

"jquery": "^3.6.0";  锁定大版本

"jquery": "~3.6.0";  锁定大版本和小版本

"jquery": "3.6.0";  指定版本

"jquery": "*";   最新版本



#### 2. 执行脚本

``` js
"scripts": {
"dev":  "node a.js && node b.js",
"server": "",
"build": "",
"stop": "",
}
// 配置之后使用npm run dev  可以执行多个命令  没有先后顺序
// 只有以下几个命令可以在执行时省略run 其他自定义的不可以省略
// install start stop 
```







# 三、 Webpack相关配置



babel不支持ES6的装饰器，需要另装@babel/plugin-proposal-decorators

![image-20210611171827545](C:\Users\11091\AppData\Roaming\Typora\typora-user-images\image-20210611171827545.png)



Array.from()：@babel/polyfill

## 1. 手动配置webpack react项目开发环境



安装项目：

```nginx
# 初始化项目
yarn init -y

# 安装webpack、webpack-cli、webpack-dev-server、html
yarn add webpack webpack-cli@3 webpack-dev-server html-webpack-plugin -D

# 安装react、react-dom
yarn add react react-dom -S

#安装loader、babel相关
# @babel/core 使用本地配置文件、 @babel/preset-env 编译最新版本javascript 
yarn add babel-loader @babel/core @babel/preset-env -D
# 编译jsx
yarn add @babel/preset-react -D
# css-loader  style-loader
yarn add style-loader css-loader -D
# 自动删除dist文件
yarn add clean-webpack-plugin -D
# css
yarn add mini-css-extract-plugin -D

# 启动命令配置
"scripts": {
    "start": "webpack-dev-server",
    "build": "webpack"
}
```

在项目中新建并且编辑`webpack.config.js`:

```js
const { CleanWebpackPlugin } = require('clean-webpack-plugin')
const HtmlWebpackPlugin = require('html-webpack-plugin')
const MiniCssExtractPlugin = require('mini-css-extract-plugin')
const path = require('path')

module.exports = {
  // 开发模式
  mode: 'development',

  devtool: 'inline-source-map',

  // 入口
  entry: {
    'js/app': './src/index.js'
  },

  // 出口
  output: {
    path: path.resolve(__dirname, './dist'),
    filename: '[name]-[hash:8].js',
    publicPath: '/', // 解决二级路由找不到资源文件
  },

  // 此配置会降低性能，需要遍历匹配
  resolve: {
    extensions: ['.jsx', '.js', '.mjs', '.json'],
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },

  // loader 配置项 preset-env 解析es6   preset-react解析jsx
  // options可以单独配置在babel.config.js
  module: {
    rules: [
      {
        test: /\.m?jsx?$/,
        exclude: /node_modules/,
        use: {
          loader: 'babel-loader'
        }
      },
      {
        test: /\.css$/i,
        use: [MiniCssExtractPlugin.loader, 'css-loader']
      },
      {
        test: /\.(png|svg|jpg|jpeg|gif)$/i,
        type: 'asset/resource',
        generator: {
          filename: 'img/[hash][ext][query]'
        }
      }
    ]
  },

  // 服务配置
  devServer: {
    contentBase: './src/assets/images',
    port: 8080,
    historyApiFallback: true, // 刷新页面就找不到了，因为刷新之后history数据未保存，设为true即可
  },

  // 插件
  plugins: [
    new HtmlWebpackPlugin({
      template: './public/index.html',
      filename: 'index.html',
      favicon: './public/favicon.ico'
    }),
    // 自动清除dist文件夹
    new CleanWebpackPlugin(),
    // 抽离css文件
    new MiniCssExtractPlugin({
      filename: ({ chunk }) => `${chunk.name.replace('js/', 'css/')}-[hash:8].css`
    })
  ]
}
```



在`package.json`中编辑脚本指令：

```json
"scripts": {
    "start": "webpack-dev-server",
    "build": "webpack"
  },
```



在`babel.coonfig.js`中配置babel：

```js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        useBuiltIns: "usage",
        corejs: 3
      }
    ],
    '@babel/preset-react'
  ],
  "plugins": [
    ["import", { libraryName: "antd-mobile", style: "css" }] // `style: true` 会加载 less 文件
  ]
}
```



其他一些安装：

```js
styled-components
```



## 2. 分离开发环境和生产环境配置

webpack默认的配置文件为：webpack.config.js || webpackfile.js

将配置文件拆分为生产和开发配置文件需要自定义设置配置文件的路径以及文件名

在项目中创建一个config文件夹，用来放置webpack配置文件





## 3. 分离





# 四、mock数据

安装json-server:

```nginx
yarn add json-server -g
# 执行
json-server ./mock.js -p 9000 -w
# 使用路由
json-server ./mock.js -p 9000 -r ./routes.json
```



## 状态管理

安装：

```nginx
yarn add redux react-redux immutable redux-immutable

yarn add redux-saga
```





# 五、React

## react中useEffect()中使用async

在17版本中可以使用





# 六、mac

安装homebrew：

```
/usr/bin/ruby -e "$(curl -fsSL https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install)"


// 如遇报错：Error: No available formula with the name "nvm"
rm -rf /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core; 
brew update
```

使用homebrew安装nvm：

```
brew install nvm
// 安装成功之后，还不能直接使用nvm命令，需要进行以下配置，将以下命令复制到终端执行：
echo "source $(brew --prefix nvm)/nvm.sh" >> .bash_profile
//  修改之后，需要重新定向来源，复制以下命令并执行
. ~/.bash_profile
```

